# Pinterest
Pinterest — социальный интернет-сервис, фотохостинг, который позволяет пользователям находить, сохранять и выкладывать изображения и видео. 

## Аудитория
MAU - 522М  
DAU - 142M

| **Страна**               | **Количество пользователей (в миллионах)** |
|--------------------------|--------------------------------------------|
| США                      | 89.9                                       |
| Бразилия                 | 38.9                                       |
| Мексика                  | 24.7                                       |
| Германия                 | 19.3                                       |
| Франция                  | 17.3                                       |
| Остальные страны         | 331.9                                      |

## Основной функционал
- Создание пинов
- Оценка пинов
- Создание досок
- Организация пинов на досках
- Просмотр ленты
- Поиск
- Регистрация/авторизация
- Подписка на пользователя

## Продуктовые метрики

| **Метрика**                | **Значение**                             |
|----------------------------|------------------------------------------|
| Создание новых пинов       | 1.5 млрд в неделю                        |
| Всего создано пинов        | >500 млрд                                |
| Всего создано досок        | >10 млрд                                 |
| Время в приложении в месяц | 1 час 49 минут                           |
| Время в приложении в день  | 2 минуты 11 секунд                       |
| Рост аудитории             | 11% с 2024 по 2025 год                   |
| Ежедневная аудитория       | 27.2% от MAU                             |


## Расчет нагрузки

### RPS
~220 пинов за сессиию в 2 минуты<br>
20 пинов за один запрос<br>
~1 новая доска в месяц (некоторые пользователи создают часто, некоторые вообще не создают новые)<br>
Переход на страницу для 1 из 20 пинов<br>
3 Поиска за сессию<br>

| **Запрос**               | **RPS**                         |
|--------------------------|---------------------------------|
| Запрос пинов для ленты   | (142m * 220/20) / 86400 = 18000 |
| Создание нового пина     | (1.5b / 7) / 86400 = 2480       |
| Создание новой доски     | (522m / 30) / 86400 = 200       |
| Добавление пина на доску | (142m * 5) / 86400 = 8220       |
| Оценка пина              | (142m * 2) / 86400 = 3290       |
| Подписка на пользователя | (522m / 30) / 86400 = 200       |
| Переход на страницу пина | (142m * 220/20) / 86400 = 18000 |
| Поиск                    | (142m * 3) / 86400 = 4930       |

### Нагрузка на сеть
Картинки хранятся в оптимизированном виде, их размер в среднем 150 Кб. На практике для ленты отдаются только превью картинок со средним размером ~10 Кб<br>
До оптимизации средний размер картинки ~1.5 Мб<br>
Поиск несет такую же нагрузку, как и основная лента, т.е. также загружает по 20 превью картинок

| **Запрос**               | **Объем трафика (Гбит/с)** |
|--------------------------|----------------------------|
| Запрос пинов для ленты   | 18000 * 10 Кб * 20 = 29.5  |
| Переход на страницу пина | 18000 * 150 Кб = 22.1      |
| Создание нового пина     | 2480 * 1.5 Мб = 31.2       |
| Создание новой доски     | 200 * 2 Кб = 0.003         |
| Добавление пина на доску | 8220 * 2 Кб = 0.135        |
| Оценка пина              | 3290 * 1 Кб = 0.027        |
| Подписка на пользователя | 200 * 1 Кб = 0.001         |
| Поиск                    | 4930 * 10 Кб * 20 = 8.1    |
| Суммарная нагрузка       | 91 Гбит/с                  |


### Занятое место на диске

Картинки хранятся в оришинальном и сжатом виде, поэтому одна картинка занимает 150 Кб + 1.5 Мб
| **Сущность** | **Объем**                 |
|--------------|---------------------------|
| Пины         | 500b * 1.65Мб = 768 ПТб   |
| Доски        | 10b * 100 Кб = 931 Тб     |
| Пользователи | 600M * 100 Кб = 56 Тб     |

## Глобальная балансировка нагрузки

Весь функционал распологается на основном домене pinterest.com

### Расположение датацентров
| Расположение ДЦ 1               | Расположение ДЦ 2     | Покрываемые регионы | Доля пользователей | Обоснование                                                                                       |
|---------------------------------|-----------------------|---------------------|--------------------|---------------------------------------------------------------------------------------------------|
| Ашберн, Северная Вирджиния, США | Даллас, Техас, США    | Северная Америка    | ~23.5%             | Второй по количеству пользователей рынок, первый по среднему доходу с пользователя                |
| Амстердам, Нидерланды           | Франкфурт, Германия   | Страны Европы       | ~26%               | Первый по размеру рынок, средний доход с пользователя выше, чем в остальном мире (за вычетом США) |
| Сан-Паулу, Бразилия             | Гонконг, Китаq        | Южная Америка       | ~50.5%             | Минимальная задержка в регионах с большой долей рынка, но низкой прибылью                         |

### Схема балансировки DNS

Логичнее всего будет использовать Geo-based DNS балансировку, для обеспечения наибольшей надежности и низкой задержки в основных регионах

## Источники
Распределение аудитории:  
https://s204.q4cdn.com/369458543/files/doc_earnings/2025/q2/presentation/2025-Q2-IR-Earnings-Presentation.pdf   

Статистические данные:  
https://adamconnell.me/pinterest-statistics/  

Pinterest Investor Relations:
https://investor.pinterestinc.com/news-and-events/press-releases/press-releases-details/2025/Pinterest-Announces-Second-Quarter-2025-Results-Delivers-17-Revenue-Growth-and-Record-Users/default.aspx
